autoOnce(
  streamMethod: string,
  streamArgsOrTriggerMethod: string | any[],
  triggerMethodOrCallback: string | ((data: any) => void),
  triggerArgsOrCallback?: any[] | ((data: any) => void),
  callback?: (data: any) => void
) {
  let streamArgs: any[] = [];
  let triggerMethod: string;
  let triggerArgs: any[] = [];
  let cb: (data: any) => void;

  // No-args form
  if (typeof streamArgsOrTriggerMethod === 'string' && typeof triggerMethodOrCallback === 'function') {
    triggerMethod = streamArgsOrTriggerMethod;
    cb = triggerMethodOrCallback;
  }
  // With args form
  else if (Array.isArray(streamArgsOrTriggerMethod) && typeof triggerMethodOrCallback === 'string') {
    streamArgs = streamArgsOrTriggerMethod;
    triggerMethod = triggerMethodOrCallback;

    if (typeof triggerArgsOrCallback === 'function') {
      cb = triggerArgsOrCallback;
    } else {
      triggerArgs = triggerArgsOrCallback as any[];
      cb = callback!;
    }
  } else {
    throw new Error('Invalid autoOnce arguments');
  }

  this.stream(streamMethod, ...streamArgs).subscribe(cb);
  this.callOnce(triggerMethod, ...triggerArgs);
}
