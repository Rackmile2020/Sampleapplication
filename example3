// src/app/utils/mfe-loader.ts
import { inject } from '@angular/core';
import { loadRemoteModule } from '@angular-architects/module-federation';
import { LoadingService } from '../services/loading.service';

export function loadRemoteWithSpinner<T>(options: any): () => Promise<T> {
  const loader = inject(LoadingService);
  return async () => {
    loader.show(); // show spinner before remote starts loading
    try {
      const module = await loadRemoteModule(options);
      return module;
    } finally {
      loader.hide(); // hide spinner when module is ready
    }
  };
}
