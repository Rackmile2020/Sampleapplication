this.router.events
  .pipe(filter(e => e instanceof NavigationStart))
  .subscribe((event: any) => {
    this.isBack = event.navigationTrigger === 'popstate';
    const currentUrl = event.url;

    if (!this.isBack) {
      // ðŸ”¹ Special case: replace /medical/data with /medical/1/data
      const lastUrl = this.history.length ? this.history[this.history.length - 1] : null;
      if (lastUrl === '/medical/data' && currentUrl.startsWith('/medical/') && currentUrl.endsWith('/data') && currentUrl !== '/medical/data') {
        // Replace last URL in history
        this.history[this.history.length - 1] = currentUrl;
      } else {
        // Normal forward navigation â†’ push to history
        if (!this.history.length || lastUrl !== currentUrl) {
          this.history.push(currentUrl);
        }
      }
    } else {
      // Browser back â†’ remove last URL
      this.history.pop();
    }
  });
