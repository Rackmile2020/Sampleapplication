export async function loadEligibilityGuard() {
  const m = await loadRemoteModule({
    type: 'module',
    remoteEntry: 'http://localhost:4200/remoteEntry.js', // parent MFE
    exposedModule: './EligibilityGuard'
  });
  return m.EligibilityGuard;
}

// Proxy guard (Angular expects sync function, so we wrap async)
export const eligibilityProxyGuard: CanActivateChildFn = async (route, state) => {
  const GuardClass = await loadEligibilityGuard();
  const router = inject(Router);

  // instantiate guard (it was decorated with @Injectable in parent)
  const guard = new GuardClass(router);

  return guard.canActivateChild(route, state);
};
